{"version":3,"file":"gamePad.js","sources":["../src/gamePad.ts"],"sourcesContent":["/**\r\n * GamePad. Object and helper to make using a controller easier in browsers \r\n * @Author Liam Searle\r\n * @copyright Emerge Gaming @copy; 2021\r\n */\r\n\r\n\r\n\r\nexport class GamePad {\r\n    public translateGamePad = new Map();\r\n    private gp: any;\r\n    private gamepads: any;\r\n\r\n    public static Buttons = {bX: 0, bO: 1};\r\n    \r\n    constructor(){\r\n        this.translateGamePad.set(0, \"X\")//space\r\n        this.translateGamePad.set(1, \"O\")//up\r\n        this.translateGamePad.set(2, \"◻\")//down\r\n        this.translateGamePad.set(3, \"△\")//left\r\n        this.translateGamePad.set(4, \"L1\")//left\r\n        this.translateGamePad.set(5, \"R1\")//left\r\n        this.translateGamePad.set(6, \"L2\")//left\r\n        this.translateGamePad.set(7, \"R2\")//left\r\n        this.translateGamePad.set(8, \"Back\")//left\r\n        this.translateGamePad.set(9, \"Start\")//left\r\n        this.translateGamePad.set(10, \"LSC\")//left stick click\r\n        this.translateGamePad.set(11, \"RSC\")//right stick click\r\n        this.translateGamePad.set(12, \"DPUp\")//left\r\n        this.translateGamePad.set(13, \"DPDown\")//left\r\n        this.translateGamePad.set(14, \"DPLeft\")//left\r\n        this.translateGamePad.set(15, \"DPRight\")//left\r\n        this.translateGamePad.set(16, \"Home\")//left\r\n        this.translateGamePad.set(17, \"TrackPad\")//left\r\n\r\n        \r\n        \r\n    }\r\n\r\n    public start(window, navigator):Promise<any> {\r\n        return new Promise((resolve) => {\r\n            window.addEventListener(\"gamepadconnected\", function() {\r\n                this.gp = navigator.getGamepads()[0];\r\n            });\r\n            function pollGamepads() {\r\n                var gamepads = navigator.getGamepads ? navigator.getGamepads() : (navigator.webkitGetGamepads ? navigator.webkitGetGamepads : []);\r\n                \r\n                 this.gp = gamepads[1];\r\n            \r\n              }\r\n            if(!('GamepadEvent' in window)) {\r\n                // No gamepad events available, poll instead.\r\n                var interval = setInterval(pollGamepads, 500);\r\n              }\r\n            \r\n            resolve(this.gp);\r\n        })\r\n           \r\n    }\r\n        \r\n}\r\n\r\nclass ButtonsImpl {\r\n        \r\n    public static bX = 0;\r\n    public static bO = 1;\r\n    public static bSq = 2;\r\n    public static bTr = 3;\r\n    public static bL1 = 4;\r\n    public static bR1 = 5;\r\n    public static bL2 = 6;\r\n    public static bR2 = 7;\r\n    public static bBack = 8;\r\n    public static bStart = 9;\r\n    public static bLSC = 10;\r\n    public static bRSC = 11;\r\n    public static bDPUp = 12;\r\n    public static bDPDown = 13;\r\n    public static bDPLeft = 14;\r\n    public static bDPRight = 15;\r\n    public static bHome = 16;\r\n    public static bTrackPad = 17;\r\n\r\n}\r\n"],"names":["GamePad","[object Object]","this","Map","translateGamePad","set","window","navigator","Promise","resolve","addEventListener","gp","getGamepads","setInterval","gamepads","webkitGetGamepads","bX","bO"],"mappings":"MAQaA,EAOTC,cANOC,sBAAmB,IAAIC,IAO1BD,KAAKE,iBAAiBC,IAAI,EAAG,KAC7BH,KAAKE,iBAAiBC,IAAI,EAAG,KAC7BH,KAAKE,iBAAiBC,IAAI,EAAG,KAC7BH,KAAKE,iBAAiBC,IAAI,EAAG,KAC7BH,KAAKE,iBAAiBC,IAAI,EAAG,MAC7BH,KAAKE,iBAAiBC,IAAI,EAAG,MAC7BH,KAAKE,iBAAiBC,IAAI,EAAG,MAC7BH,KAAKE,iBAAiBC,IAAI,EAAG,MAC7BH,KAAKE,iBAAiBC,IAAI,EAAG,QAC7BH,KAAKE,iBAAiBC,IAAI,EAAG,SAC7BH,KAAKE,iBAAiBC,IAAI,GAAI,OAC9BH,KAAKE,iBAAiBC,IAAI,GAAI,OAC9BH,KAAKE,iBAAiBC,IAAI,GAAI,QAC9BH,KAAKE,iBAAiBC,IAAI,GAAI,UAC9BH,KAAKE,iBAAiBC,IAAI,GAAI,UAC9BH,KAAKE,iBAAiBC,IAAI,GAAI,WAC9BH,KAAKE,iBAAiBC,IAAI,GAAI,QAC9BH,KAAKE,iBAAiBC,IAAI,GAAI,YAM3BJ,MAAMK,EAAQC,GACjB,OAAO,IAAIC,SAASC,IAChBH,EAAOI,iBAAiB,oBAAoB,WACxCR,KAAKS,GAAKJ,EAAUK,cAAc,MAQjC,iBAAkBN,GAEJO,aARnB,WACI,IAAIC,EAAWP,EAAUK,YAAcL,EAAUK,cAAiBL,EAAUQ,kBAAoBR,EAAUQ,kBAAoB,GAE7Hb,KAAKS,GAAKG,EAAS,KAKqB,KAG7CL,EAAQP,KAAKS,QA1CPX,UAAU,CAACgB,GAAI,EAAGC,GAAI"}