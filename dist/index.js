var e=function(){function e(e,t,n){this.keysToReplace=[],this.dosRef=e,this.options=t,this.canvas=n}return e.prototype.start=function(){var e=this;return new Promise((function(t,n){e.dosRef(e.canvas,{cycles:e.options.cycles,wdosboxUrl:"/dosbox/wdosbox.js",onprogress:function(){},log:function(){}}).ready((function(n,o){n.extract(e.options.zipFile).then((function(){o(["-c",e.options.execCmd]).then((function(n){e.ci=n,t(n),window.addEventListener("unload",e.unload)}))}))}))}))},e.prototype.overrideKey=function(e,t){0===this.keysToReplace.length&&this.addKeyEventListeners(),this.keysToReplace.push({targetKey:e,replacementKeyCode:t})},e.prototype.addKeyEventListeners=function(){window.addEventListener("keypress",this.handleKeyEvent.bind(this)),window.addEventListener("keyup",this.handleKeyEvent.bind(this))},e.prototype.handleKeyEvent=function(e){var t=this;console.log("poo"),e.key&&this.keysToReplace.filter((function(n){n.targetKey==e.key&&(e.preventDefault(),e.stopImmediatePropagation(),console.log(e.type),t.ci.simulateKeyPress(n.replacementKeyCode))}))},e.prototype.unload=function(){this.ci.exit()},e}();export{e as DosGame};
//# sourceMappingURL=index.js.map
